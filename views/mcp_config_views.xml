<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- MCP Configuration Form View -->
        <record id="view_mcp_config_settings_form" model="ir.ui.view">
            <field name="name">mcp.config.settings.form</field>
            <field name="model">mcp.config.settings</field>
            <field name="arch" type="xml">
                <form string="MCP Server Configuration" class="oe_form_configuration">
                    <header>
                        <button string="Save" type="object" name="execute" class="oe_highlight"/>
                        <button string="Cancel" type="object" name="cancel" class="oe_link"/>
                    </header>
                    <sheet>
                        <div class="row mt16 o_settings_container">
                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_server_host"/>
                                    <div class="text-muted">
                                        Bind address for MCP HTTP server (default: localhost only)
                                    </div>
                                    <field name="mcp_server_host"/>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_server_port"/>
                                    <div class="text-muted">
                                        Port for MCP HTTP server
                                    </div>
                                    <field name="mcp_server_port"/>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_api_key"/>
                                    <div class="text-muted">
                                        API key for authenticating MCP client connections (Bearer token)
                                    </div>
                                    <field name="mcp_api_key" password="True"/>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_log_level"/>
                                    <div class="text-muted">
                                        Logging verbosity level
                                    </div>
                                    <field name="mcp_log_level"/>
                                </div>
                            </div>
                        </div>

                        <h2>Phone-Home Configuration</h2>
                        <div class="row mt16 o_settings_container">
                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_phone_home_url"/>
                                    <div class="text-muted">
                                        API endpoint to register server on startup (leave empty to disable)
                                    </div>
                                    <field name="mcp_phone_home_url"/>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_heartbeat_interval"/>
                                    <div class="text-muted">
                                        Heartbeat interval in seconds
                                    </div>
                                    <field name="mcp_heartbeat_interval"/>
                                </div>
                            </div>
                        </div>

                        <h2>Command Execution</h2>
                        <div class="row mt16 o_settings_container">
                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_command_timeout"/>
                                    <div class="text-muted">
                                        Default timeout for command execution in seconds
                                    </div>
                                    <field name="mcp_command_timeout"/>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_command_max_timeout"/>
                                    <div class="text-muted">
                                        Maximum allowed command timeout in seconds
                                    </div>
                                    <field name="mcp_command_max_timeout"/>
                                </div>
                            </div>
                        </div>

                        <h2>Filesystem Operations</h2>
                        <div class="row mt16 o_settings_container">
                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_max_read_size_mb"/>
                                    <div class="text-muted">
                                        Maximum file size for read operations (MB)
                                    </div>
                                    <field name="mcp_max_read_size_mb"/>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_max_write_size_mb"/>
                                    <div class="text-muted">
                                        Maximum file size for write operations (MB)
                                    </div>
                                    <field name="mcp_max_write_size_mb"/>
                                </div>
                            </div>
                        </div>

                        <h2>Database Operations</h2>
                        <div class="row mt16 o_settings_container">
                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_query_timeout"/>
                                    <div class="text-muted">
                                        Default query timeout in seconds
                                    </div>
                                    <field name="mcp_query_timeout"/>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_max_result_rows"/>
                                    <div class="text-muted">
                                        Maximum number of rows returned by queries
                                    </div>
                                    <field name="mcp_max_result_rows"/>
                                </div>
                            </div>
                        </div>

                        <h2>Audit Logging</h2>
                        <div class="row mt16 o_settings_container">
                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane">
                                    <field name="mcp_audit_enabled"/>
                                </div>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_audit_enabled"/>
                                    <div class="text-muted">
                                        Enable audit logging of all MCP operations
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6 o_setting_box">
                                <div class="o_setting_left_pane"/>
                                <div class="o_setting_right_pane">
                                    <label for="mcp_audit_log_path"/>
                                    <div class="text-muted">
                                        Path to audit log file
                                    </div>
                                    <field name="mcp_audit_log_path"/>
                                </div>
                            </div>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- MCP Configuration Action -->
        <record id="action_mcp_config_settings" model="ir.actions.act_window">
            <field name="name">MCP Server Configuration</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mcp.config.settings</field>
            <field name="view_mode">form</field>
            <field name="target">inline</field>
        </record>

        <!-- MCP Configuration Menu -->
        <menuitem id="menu_mcp_root"
                  name="MCP Server"
                  sequence="100"
                  web_icon="static/description/icon.png"/>

        <menuitem id="menu_mcp_config"
                  name="Configuration"
                  parent="menu_mcp_root"
                  action="action_mcp_config_settings"
                  sequence="10"/>
    </data>
</odoo>
